import{s as g,r as v,f as y,q as d,o as b,c as _,a as s,v as c,x as p,y as h,z as x,m as T,p as V,A as k,_ as P,B as C,t as f,b as m,w as S}from"./BVowDNQm.js";import{u as w,a as A}from"./-foAk11z.js";const M={key:0,class:"card-header"},B={__name:"CardHeader",setup(i){const{authenticated:t,grid3:n}=g(w()),a=v({group:""});return y(a,o=>{t.value&&console.log(n)}),(o,e)=>d(t)?(b(),_("div",M,[e[3]||(e[3]=s("h4",null,"Energy balance",-1)),c(s("input",{type:"radio",id:"day",value:"Diary","onUpdate:modelValue":e[0]||(e[0]=l=>h(a)?a.value=l:null)},null,512),[[p,d(a)]]),e[4]||(e[4]=s("label",{for:"day"},"Diary",-1)),c(s("input",{type:"radio",id:"month",value:"Monthly","onUpdate:modelValue":e[1]||(e[1]=l=>h(a)?a.value=l:null)},null,512),[[p,d(a)]]),e[5]||(e[5]=s("label",{for:"month"},"Monthly",-1)),c(s("input",{type:"radio",id:"year",value:"Annual","onUpdate:modelValue":e[2]||(e[2]=l=>h(a)?a.value=l:null)},null,512),[[p,d(a)]]),e[6]||(e[6]=s("label",{for:"year"},"Annual",-1))])):x("",!0)}},D=Symbol.for("nuxt:client-only"),E=T({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(i,{slots:t,attrs:n}){const a=v(!1);return V(()=>{a.value=!0}),k(D,!0),o=>{var r;if(a.value)return(r=t.default)==null?void 0:r.call(t);const e=t.fallback||t.placeholder;if(e)return e();const l=o.fallback||o.placeholder||"",u=o.fallbackTag||o.placeholderTag||"span";return _(u,n,l)}}}),N=()=>({graph:async()=>{const t=["3","132"];var n=[];for(let a in t){const{pending:o,data:e}=await A("https://poweramigo.com/smr/api/get/"+t[a]+"/data?date_start=2023-12-01&time_start=12:00:00&date_end=2023-12-02&units=P&interval=1hour&time_end=12:00:00",{method:"GET",headers:{Authorization:"Bearer "+document.cookie.split("=")[1]}},"$aeNfF1ntZC");n.push(e)}return n}}),{graph:F}=N(),R={data(){return{grid3:g(w()),Tower_1:0,Tower_2:0,suma:0,optionsProfileVisit:{dataLabels:{enabled:!0},chart:{toolbar:{show:!1},type:"bar",stacked:!0},series:[{name:"Grid",data:[]},{name:"Solar",data:[]}],colors:["#004062","#FDC015"],xaxis:{categories:["Tower 3","Tower 132"]}}}},computed:{graph_api(){return this.optionsProfileVisit.series}},methods:{async grafica(){const i=await F();if(i[0]._rawValue===null)return this.optionsProfileVisit.series;i[0]._rawValue.grid.map(t=>{this.suma+=t.value}),this.optionsProfileVisit.series[0].data.push(this.suma),this.Tower_1=this.suma,this.suma=0,i[1]._rawValue.grid.map(t=>{this.suma+=t.value/1e3}),this.optionsProfileVisit.series[0].data.push(this.suma),this.Tower_2+=this.suma,this.suma=0,i[0]._rawValue.generation.map(t=>{this.suma+=t.value}),this.optionsProfileVisit.series[1].data.push(this.suma),this.Tower_1+=this.suma,this.suma=0,i[1]._rawValue.generation.map(t=>{this.suma+=t.value/1e3}),this.optionsProfileVisit.series[1].data.push(this.suma),this.Tower_2+=this.suma,this.suma=0}},mounted(){this.grafica()}},U={class:"page-content"},$={class:"row"},z={class:"col-12"},G={class:"row"},H={class:"col-6 col-lg-6 col-md-6"},O={class:"card"},q={class:"card-body px-3 py-3"},L={class:"row"},Z={class:"col-md-8"},j={class:"font-extrabold mb-0"},I={class:"col-6 col-lg-6 col-md-6"},J={class:"card"},K={class:"card-body px-3 py-3"},Q={class:"row"},W={class:"col-md-8"},X={class:"font-extrabold mb-0"},Y={class:"row"},ss={class:"col-12"},ts={class:"card"},es={class:"card-body"};function as(i,t,n,a,o,e){const l=B,u=C("apexchart"),r=E;return b(),_("div",null,[t[4]||(t[4]=s("div",{class:"page-heading"},[s("h3",null,"Energy Monitoring System")],-1)),s("div",U,[s("section",$,[s("div",z,[s("div",G,[s("div",H,[s("div",O,[s("div",q,[s("div",L,[t[1]||(t[1]=s("div",{class:"col-2"},[s("div",{class:"stats-icon"},[s("span",{class:"badge badge-pill badge-danger"},[s("i",{class:"bi bi-building"})])])],-1)),s("div",Z,[t[0]||(t[0]=s("h6",{class:"text-muted font-semibold"},"Tower 3",-1)),s("h6",j,f(o.Tower_1),1)])])])])]),s("div",I,[s("div",J,[s("div",K,[s("div",Q,[t[3]||(t[3]=s("div",{class:"col-2"},[s("div",{class:"stats-icon"},[s("span",{class:"badge badge-pill badge-danger"},[s("i",{class:"bi bi-building"})])])],-1)),s("div",W,[t[2]||(t[2]=s("h6",{class:"text-muted font-semibold"},"Tower 132",-1)),s("h6",X,f(o.Tower_2),1)])])])])])]),s("div",Y,[s("div",ss,[s("div",ts,[m(l),s("div",es,[m(r,null,{default:S(()=>[m(u,{height:"200",options:o.optionsProfileVisit,series:e.graph_api},null,8,["options","series"])]),_:1})])])])])])])])])}const ls=P(R,[["render",as]]);export{ls as default};
